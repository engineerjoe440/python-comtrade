
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Python Comtrade &#8212; python-comtrade`</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="#">python-comtrade`</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Python Comtrade</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="python-comtrade">
<h1>Python Comtrade<a class="headerlink" href="#python-comtrade" title="Permalink to this headline">¶</a></h1>
<p><strong>Python Comtrade</strong> is a module for Python 3 designed to read <em>Common Format for Transient Data Exchange</em> (COMTRADE) files. These consists of oscillography data recorded during power system outages, control systems tests, validation and tests of field equipment, protective relaying logs, etc. The COMTRADE format is defined by IEEE Standards, summarized in the table below. Some equipment vendors put additional information in proprietary versions of it. This module aims IEEE definitions but may support those proprietary versions.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Standard</p></th>
<th class="head"><p>Revision</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>IEEE C37.111(TM)-1991</p></td>
<td><p>1991</p></td>
</tr>
<tr class="row-odd"><td><p>IEEE C37.111(TM)-1999</p></td>
<td><p>1999</p></td>
</tr>
<tr class="row-even"><td><p>IEEE C37.111(TM)-2013 / IEC 60255-24</p></td>
<td><p>2013</p></td>
</tr>
</tbody>
</table>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">comtrade</span>
</pre></div>
</div>
<p>Or just copy <code class="docutils literal notranslate"><span class="pre">comtrade.py</span></code> from this repository.</p>
</div>
<div class="section" id="how-to-use">
<h2>How to Use<a class="headerlink" href="#how-to-use" title="Permalink to this headline">¶</a></h2>
<p>The examples below shows how to open both CFG and DAT files or the new CFF file to plot (using <code class="docutils literal notranslate"><span class="pre">pyplot</span></code>) analog channel oscillography.</p>
<div class="section" id="cfg-and-dat-files-all-revisions">
<h3>CFG and DAT files (all revisions)<a class="headerlink" href="#cfg-and-dat-files-all-revisions" title="Permalink to this headline">¶</a></h3>
<p>Comtrade files separated in CFG and DAT formats can also be read with <code class="docutils literal notranslate"><span class="pre">Comtrade.load</span></code>. A <code class="docutils literal notranslate"><span class="pre">CFG</span></code> file path must be passed as an argument and, optionaly, a <code class="docutils literal notranslate"><span class="pre">DAT</span></code> file path too (if the file name is not equal of the CFG file).</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">comtrade</span> <span class="kn">import</span> <span class="n">Comtrade</span>

<span class="n">rec</span> <span class="o">=</span> <span class="n">Comtrade</span><span class="p">()</span>
<span class="n">rec</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;sample_files/sample_ascii.cfg&quot;</span><span class="p">,</span> <span class="s2">&quot;sample_files/sample_ascii.dat&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Trigger time = </span><span class="si">{}</span><span class="s2">s&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rec</span><span class="o">.</span><span class="n">trigger_time</span><span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rec</span><span class="o">.</span><span class="n">time</span><span class="p">,</span> <span class="n">rec</span><span class="o">.</span><span class="n">analog</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rec</span><span class="o">.</span><span class="n">time</span><span class="p">,</span> <span class="n">rec</span><span class="o">.</span><span class="n">analog</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="n">rec</span><span class="o">.</span><span class="n">analog_channel_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">rec</span><span class="o">.</span><span class="n">analog_channel_ids</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>Additional header (<code class="docutils literal notranslate"><span class="pre">*.hdr</span></code>) and information (<code class="docutils literal notranslate"><span class="pre">*.inf</span></code>) files are not supported.</p>
</div>
<div class="section" id="cff-files-2013-revision">
<h3>CFF files (2013 revision)<a class="headerlink" href="#cff-files-2013-revision" title="Permalink to this headline">¶</a></h3>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">comtrade</span> <span class="kn">import</span> <span class="n">Comtrade</span>

<span class="n">rec</span> <span class="o">=</span> <span class="n">Comtrade</span><span class="p">()</span>
<span class="n">rec</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;sample_files/sample_ascii.cff&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Trigger time = </span><span class="si">{}</span><span class="s2">s&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rec</span><span class="o">.</span><span class="n">trigger_time</span><span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rec</span><span class="o">.</span><span class="n">time</span><span class="p">,</span> <span class="n">rec</span><span class="o">.</span><span class="n">analog</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rec</span><span class="o">.</span><span class="n">time</span><span class="p">,</span> <span class="n">rec</span><span class="o">.</span><span class="n">analog</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="n">rec</span><span class="o">.</span><span class="n">analog_channel_ids</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">rec</span><span class="o">.</span><span class="n">analog_channel_ids</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">Comtrade</span></code> class must be instantiated and the method <code class="docutils literal notranslate"><span class="pre">load</span></code> called with the <code class="docutils literal notranslate"><span class="pre">CFF</span></code> file path.</p>
<p><code class="docutils literal notranslate"><span class="pre">Comtrade.analog</span></code> and <code class="docutils literal notranslate"><span class="pre">Comtrade.status</span></code> lists stores analog and status channel sample lists respectively. These can be accessed through zero-based indexes, i.e., <code class="docutils literal notranslate"><span class="pre">Comtrade.analog[0]</span></code>. The list <code class="docutils literal notranslate"><span class="pre">Comtrade.time</span></code> stores each sample time in seconds.</p>
<p>More information can be accessed through <code class="docutils literal notranslate"><span class="pre">Comtrade.cfg</span></code> object, which stores data such as detailed channel information.</p>
<p>Data of additional sections, such as HDR and INF, can be accessed through <code class="docutils literal notranslate"><span class="pre">hdr</span></code> and <code class="docutils literal notranslate"><span class="pre">inf</span></code> properties, respectively.</p>
</div>
</div>
<div class="section" id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<p>This module implements some of the functionality described in each of the Standard revisions. The tables below lists some features and file formats and which revision supports it. It also shows whether this module support the feature or the format.</p>
<p>Feel free to pull requests implementing one of these unsupported features or fixing bugs.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Formats</p></th>
<th class="head"><p>1991</p></th>
<th class="head"><p>1999</p></th>
<th class="head"><p>2013</p></th>
<th class="head"><p>Module Support</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CFG file format</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-odd"><td><p>DAT file format</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-even"><td><p>HDR file format</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-odd"><td><p>INF file format</p></td>
<td></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>no</p></td>
</tr>
<tr class="row-even"><td><p>CFF file format</p></td>
<td></td>
<td></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-odd"><td><p>ASCII data file format</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-even"><td><p>Binary data file format</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-odd"><td><p>Binary32 data file format</p></td>
<td></td>
<td></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-even"><td><p>Float32 data file format</p></td>
<td></td>
<td></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-odd"><td><p>Schema for phasor data</p></td>
<td></td>
<td></td>
<td><p>x</p></td>
<td><p>no</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Features</p></th>
<th class="head"><p>1991</p></th>
<th class="head"><p>1999</p></th>
<th class="head"><p>2013</p></th>
<th class="head"><p>Module Support</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>COMTRADE standard revision</p></td>
<td></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-odd"><td><p>Timestamp multiplication factor</p></td>
<td></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-even"><td><p>Time code and local code</p></td>
<td></td>
<td></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-odd"><td><p>Time quality of the samples</p></td>
<td></td>
<td></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-even"><td><p>Analog channel time skew</p></td>
<td></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>Partial</p></td>
</tr>
<tr class="row-odd"><td><p>Analog channel primary and secondary VT or CT ratio</p></td>
<td></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-even"><td><p>Status channel phase and monitored circuit</p></td>
<td></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
<tr class="row-odd"><td><p>Multiple sample rates</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>x</p></td>
<td><p>Partial</p></td>
</tr>
<tr class="row-even"><td><p>Nanoseconds scale</p></td>
<td></td>
<td></td>
<td><p>x</p></td>
<td><p>x</p></td>
</tr>
</tbody>
</table>
<div class="section" id="unsupported-features">
<h3>Unsupported features<a class="headerlink" href="#unsupported-features" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Nanoseconds time base within Python’s <code class="docutils literal notranslate"><span class="pre">datetime</span></code> objects (such as <code class="docutils literal notranslate"><span class="pre">start_timestamp</span></code> and <code class="docutils literal notranslate"><span class="pre">trigger_timestamp</span></code> properties). It warns the user but doesn’t use it, truncating the numbers.</p></li>
<li><p>Use of multiple sample rates in time calculations for binary data.</p></li>
<li><p>Null fields in ASCII data (blank columns).</p></li>
<li><p>Missing data fields in binary data (<code class="docutils literal notranslate"><span class="pre">0xFFFF...</span></code>) are treated as any other value.</p></li>
</ul>
</div>
</div>
<div class="section" id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/dparrini/python-comtrade">https://github.com/dparrini/python-comtrade</a></p>
</div>
<div class="section" id="support">
<h2>Support<a class="headerlink" href="#support" title="Permalink to this headline">¶</a></h2>
<p>Feel free to report any bugs you find. You are welcome to fork and submit pull requests.</p>
</div>
<div class="section" id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p>The module is available at <a class="reference external" href="https://github.com/dparrini/python-comtrade">GitHub</a> under the MIT license.</p>
</div>
</div>
<div class="section" id="source-repository-and-package-release-pypi">
<h1>Source Repository and Package Release (PyPI):<a class="headerlink" href="#source-repository-and-package-release-pypi" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>GitHub: <a class="reference external" href="https://github.com/dparrini/python-comtrade">https://github.com/dparrini/python-comtrade</a></p></li>
<li><p>PyPI: <a class="reference external" href="https://pypi.org/project/comtrade/">https://pypi.org/project/comtrade/</a></p></li>
</ul>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Python Comtrade</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#how-to-use">How to Use</a><ul>
<li><a class="reference internal" href="#cfg-and-dat-files-all-revisions">CFG and DAT files (all revisions)</a></li>
<li><a class="reference internal" href="#cff-files-2013-revision">CFF files (2013 revision)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#features">Features</a><ul>
<li><a class="reference internal" href="#unsupported-features">Unsupported features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
<li><a class="reference internal" href="#support">Support</a></li>
<li><a class="reference internal" href="#license">License</a></li>
</ul>
</li>
<li><a class="reference internal" href="#source-repository-and-package-release-pypi">Source Repository and Package Release (PyPI):</a></li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="#">python-comtrade`</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Python Comtrade</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, David Rodrigues Parrini.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.3.1.
    </div>
  </body>
</html>